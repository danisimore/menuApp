# MenuApp
Реализация учебного проекта в рамках курса Интенсив по Python от Ylab.

**ВЕРСИЯ ОТ 29.01.2024**
- [x] **Внесены изменения в инструкцию по развертыванию**
- [x] **Записана новая видеоинструкция по развертыванию и тестированию** 
- [x] **Написаны CRUD тесты для ранее разработанного API с помощью библиотеки pytest**
- [x] **Подготовить отдельный контейнер для запуска тестов. Команду для запуска указать в README.md** - *подготовлен отдельный контейнер с тестовой базой данных. Тесты запускаются независимо от БД, которая обслуживает веб-приложение. Команда для запуска тестов указана ниже, в рзделе Тестирование*
- [x] **Реализовать вывод количества подменю и блюд для Меню через один (сложный) ORM запрос** - *при получении определенного меню, тело ответа содержит данные о блюдах и подменю для указанного меню**
- [x] **Реализовать тестовый сценарий «Проверка кол-ва блюд и подменю в меню» из Postman с помощью pytest**

## Видео инструкция по развертыванию приложения.



https://github.com/danisimore/menuApp/assets/101730132/6b13cd75-b003-4f4b-8b7e-dbd99b671581



**ТРЕБОВАНИЯ**
+ У вас должен быть установлен docker
+ Развертывание должно проходить на платформе Linux

## Инструкция по развертыванию приложения.
1. Скопируйте ссылку репозитория ![Copy Repo-link](https://i.imgur.com/p8WPXpm.png)
2. Создайте директорию и откройте в ней командную строку ![Open CMD](https://i.imgur.com/DQay8e8.png)
3. Склонируйте репозиторий с помощью команды `git clone https://github.com/danisimore/menuApp.git` ![Clon Repo](https://i.imgur.com/FkDS1pr.png)
4. С помощью команды `cd menuApp` перейдите в директорию, которая была склонирована
5. Создайте файл .env-prod используя редактор nano - `nano .env-prod`. У вас откроется окно редактора nano.
6. Скопируйте и вставьте следующие переменные окружения:
   ```
   DB_HOST=db
   DB_PORT=5432
   DB_NAME=postgres
   DB_USER=postgres
   DB_PASSWORD=postgres
   
   TEST_DB_HOST=db_test
   TEST_DB_PORT=5432
   TEST_DB_NAME=postgres
   TEST_DB_USER=postgres
   TEST_DB_PASSWORD=postgres
   
   POSTGRES_DB=postgres
   POSTGRES_USER=postgres
   POSTGRES_PASSWORD=postgres
   ```
7. Нажмите **Crtl + O**, затем **ENTER**. Файл будет сохранен, чтобы выйти из редактора нажмите сочетание клавиш **Ctrl + X**.
8. Напишите команду `sudo make up`
10. Подождите 10 секунд. Задержка выставлена, для того чтобы БД успела полностью инициализироваться перед тем, как alembic начнет делать миграции.

✅	Приложение запущено и готово к работе.

## Тестирование
Реализованы тестовые сценарии аналогичные тестированию в Postman.

**Запуск тестов**:
1. Чтобы запустить **все тесты**, используйте команду:
   ```
   sudo make run_tests
   ```
2. Чтобы отдельно протестировать CRUD операции **меню**, используйте команду:
   ```
   sudo make run_menu_tests
   ```
3. Чтобы отдельно протестировать CRUD операции **подменю**, используйте команду:
   ```
   sudo make run_submenu_tests
   ```
4. Чтобы отдельно протестировать CRUD операции **блюд**, используйте команду:
   ```
   sudo make run_dishes_tests
   ```
5. Чтобы отдельно протестировать сценарий операции **Проверка кол-ва блюд и подменю в меню**, используйте команду:
   ```
   sudo make run_check_quan_of_dishes_and_submenus_tests
   ```
