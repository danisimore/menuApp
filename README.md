# MenuApp
Реализация учебного проекта в рамках курса Интенсив по Python от Ylab.

**ВЕРСИЯ ОТ 31.01.2024**
- [x] Вынести бизнес логику и запросы в БД в отдельные слои приложения.
- [x] Добавить кэширование запросов к API с использованием Redis. Не забыть про инвалидацию кэша.
- [x] Добавить pre-commit хуки в проект. Файл yaml будет прикреплен к ДЗ.
- [x] Покрыть проект type hints (тайпхинтами)
- [x] Описать ручки API в соответствии c OpenAPI
- [x] Реализовать в тестах аналог Django reverse() для FastAPI

**ТРЕБОВАНИЯ**
+ У вас должен быть установлен docker
+ Развертывание должно проходить на платформе Linux

## Инструкция по развертыванию приложения.
1. Скопируйте ссылку репозитория ![Copy Repo-link](https://i.imgur.com/p8WPXpm.png)
2. Создайте директорию и откройте в ней командную строку ![Open CMD](https://i.imgur.com/DQay8e8.png)
3. Склонируйте репозиторий с помощью команды
   ```
   git clone https://github.com/danisimore/menuApp.git
   ```
    ![Clon Repo](https://i.imgur.com/FkDS1pr.png)
4. Перейдите в директорию, которая была склонирована c помощью команды:
   ```
   cd menuApp
   ```
5. Создайте файл .env-prod используя редактор nano:
   ```
   nano .env-prod
   ```
6. Скопируйте и вставьте следующие переменные окружения:
   ```
   DB_HOST=db
   DB_PORT=5432
   DB_NAME=postgres
   DB_USER=postgres
   DB_PASSWORD=postgres

   TEST_DB_HOST=db_test
   TEST_DB_PORT=5432
   TEST_DB_NAME=postgres
   TEST_DB_USER=postgres
   TEST_DB_PASSWORD=postgres

   POSTGRES_DB=postgres
   POSTGRES_USER=postgres
   POSTGRES_PASSWORD=postgres
   ```
7. Нажмите **Crtl + O**, затем **ENTER**. Файл будет сохранен, чтобы выйти из редактора нажмите сочетание клавиш **Ctrl + X**.
8. Напишите команду
    ```
    sudo make up
    ```
9. Подождите 10 секунд. Задержка выставлена, для того чтобы БД успела полностью инициализироваться перед тем, как alembic начнет делать миграции.

✅	Приложение запущено и готово к работе.

## Тестирование
Реализованы тестовые сценарии аналогичные тестированию в Postman.

**Запуск тестов**:
1. Чтобы запустить **все тесты**, используйте команду:
   ```
   sudo make run_tests
   ```
2. Чтобы отдельно протестировать CRUD операции **меню**, используйте команду:
   ```
   sudo make run_menu_tests
   ```
3. Чтобы отдельно протестировать CRUD операции **подменю**, используйте команду:
   ```
   sudo make run_submenu_tests
   ```
4. Чтобы отдельно протестировать CRUD операции **блюд**, используйте команду:
   ```
   sudo make run_dishes_tests
   ```
5. Чтобы отдельно протестировать сценарий операции **Проверка кол-ва блюд и подменю в меню**, используйте команду:
   ```
   sudo make run_check_quan_of_dishes_and_submenus_tests
   ```
